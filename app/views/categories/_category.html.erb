<table>
  <thead>
    <tr>
      <% if @shop.owned_by?(current_user) -%>
        <th class="category_title">
          <%= best_in_place(category, :name, :path => shop_category_path(category.shop, category)) %>
          <%= link_to "✕", shop_category_path(@shop, category), :method => :delete, :confirm => "Etes vous certain de vouloir éffacer cette catégorie?", :class => "delete owner" %>
        </th>
        <th class="spacer">
        </th>
        <% category.sizes.each do |size| %>
          <th>
            <%= best_in_place(size, :name, :path => shop_category_size_path(category.shop, category, size)) %>
            <%= link_to "✕", shop_category_size_path(@shop, category, size), :method => :delete, :confirm => "Etes vous certain de vouloir éffacer cette taille?", :class => "delete owner" %>
          </th>
        <% end %>
        <th class="owner">
          <%= form_for [@shop, category, Size.new] do |f| %>
            <%= f.text_field :name, :placeholder => "Rajoutez une taille.", :size => 17, :id => [dom_id(category), 'new_size'].join('_') %>
          <% end -%>
        </th>
      <% else -%>
        <th class="category_title">
          <%= category.name %>
        </th>
        <th class="spacer">
        </th>
        <% category.sizes.each do |size| %>
          <th>
            <%= size.name %>
          </th>
        <% end %>
      <% end -%>
    </tr>
  </thead>
  <tbody>
    <%= render category.products %>
    <% if @shop.owned_by?(current_user) -%>
      <tr class="owner">
        <td colspan="<%= category.sizes.count + 1 %>">
          <%= form_for [@shop, category, Product.new] do |f| %>
            <%= f.text_field :name, :placeholder => "Rajoutez un produit.", :id => [dom_id(category), 'new_product'].join('_') %>
          <% end -%>
        </td>
      </tr>
    <% end -%>
  </tbody>
</table>


